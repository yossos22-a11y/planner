<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ì›í˜• ì‹¤ì‹œê°„ ê³„íší‘œ</title>

<style>
:root{ --size: min(90vw, 380px); }
*{ box-sizing:border-box; }

body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  font-family: system-ui, -apple-system, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
  background:#fff;
  padding-top: env(safe-area-inset-top);
}

.wrap{ width:100%; max-width:560px; padding:16px; }

.card{
  border:1px solid #eee;
  border-radius:18px;
  padding:14px;
  box-shadow:0 6px 20px rgba(0,0,0,.06);
}

/* ìƒë‹¨ ë‚ ì§œ/ì‹œê°„ */
.topBig{
  display:flex;
  justify-content:center;
  align-items:center;
  margin-bottom:12px;
}
.topBig span{
  font-weight:900;
  font-size:clamp(18px, 5vw, 28px);
  color:#000;
  font-variant-numeric: tabular-nums;
  white-space:nowrap;
}

/* ì›í˜• */
.dial{ width:var(--size); height:var(--size); margin:0 auto; }
svg{ width:100%; height:100%; display:block; }

/* í•˜ë‹¨ íƒ€ì´ë¨¸ */
.timerBox{
  margin-top:14px;
  border:1px solid #f0f0f0;
  border-radius:16px;
  padding:12px;
  display:grid;
  gap:10px;
}
.timerTop{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:10px;
}
.timerTitle{ font-weight:900; font-size:16px; }
.timerDisplay{
  font-weight:900;
  font-size:28px;
  font-variant-numeric: tabular-nums;
}
.progress{
  height:10px;
  border-radius:999px;
  background:#f1f1f1;
  overflow:hidden;
}
.progress > div{ height:100%; width:0%; background:#000; }

.timerControls{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.field{ display:flex; gap:6px; align-items:center; }
.field label{ font-weight:800; font-size:14px; }
.field input{
  width:70px;
  padding:8px 10px;
  border:1px solid #e5e5e5;
  border-radius:12px;
  font-weight:900;
}
.btns{ display:flex; gap:8px; }
button{
  border:1px solid #e5e5e5;
  background:#fff;
  padding:10px 12px;
  border-radius:14px;
  font-weight:900;
  cursor:pointer;
}
button.primary{ border-color:#000; }
</style>
</head>

<body>
<div class="wrap">
<div class="card">

  <div class="topBig">
    <span id="topDateTime">----</span>
  </div>

  <div class="dial">
    <svg viewBox="-6 -6 112 112">

      <g id="hours"></g>

      <circle cx="50" cy="50" r="40"
        fill="none" stroke="#e7e7e7" stroke-width="12"/>

      <g id="arcs"></g>
      <g id="labels"></g>

      <line id="hand" x1="50" y1="50" x2="50" y2="12"
        stroke="#000" stroke-width="0.9"/>

      <polygon id="arrow"
        points="0,-2 -1.6,1.6 1.6,1.6"
        fill="#000"/>

      <!-- ì¤‘ì•™ ì •ë³´ -->
      <g id="centerInfo">
        <circle cx="50" cy="50" r="17" fill="#fff" opacity="0.95"/>
        <circle cx="50" cy="50" r="2.2" fill="#fff"/>

        <text id="centerLabel" x="50" y="44"
          text-anchor="middle" fill="#000"
          font-size="5" font-weight="900">-</text>

        <text id="centerRange" x="50" y="51"
          text-anchor="middle" fill="#000"
          font-size="4.6" font-weight="800"
          style="font-variant-numeric:tabular-nums">--:--~--:--</text>

        <!-- ğŸ”½ ë‚¨ì€ ì‹œê°„ -->
        <text id="centerRemain" x="50" y="58"
          text-anchor="middle" fill="#555"
          font-size="3.6" font-weight="700"></text>
      </g>

    </svg>
  </div>

  <!-- í•˜ë‹¨ íƒ€ì´ë¨¸ -->
  <div class="timerBox">
    <div class="timerTop">
      <div class="timerTitle">íƒ€ì´ë¨¸</div>
      <div class="timerDisplay" id="timerDisplay">00:25:00</div>
    </div>

    <div class="progress"><div id="timerBar"></div></div>

    <div class="timerControls">
      <div style="display:flex; gap:10px;">
        <div class="field">
          <label>ì‹œ</label>
          <input id="timerHours" type="number" min="0" max="99" value="0">
        </div>
        <div class="field">
          <label>ë¶„</label>
          <input id="timerMinutes" type="number" min="0" max="59" value="25">
        </div>
      </div>
      <div class="btns">
        <button class="primary" id="btnStart">ì‹œì‘</button>
        <button id="btnPause">ì •ì§€</button>
        <button id="btnReset">ë¦¬ì…‹</button>
      </div>
    </div>
  </div>

</div>
</div>

<script>
/* ===== ê³„íší‘œ ===== */
const SEGMENTS=[
  {start:"04:15", end:"04:30", label:"ê¸°ìƒ", color:"#FF8A00"},
  {start:"04:30", end:"06:30", label:"ê³µë¶€", color:"#5BC0FF"},
  {start:"06:30", end:"09:30", label:"ìœ¡ì•„/ê°€ì‚¬", color:"#FFD400"},
  {start:"09:30", end:"10:30", label:"ê³µë¶€", color:"#5BC0FF"},
  {start:"10:30", end:"14:00", label:"ìœ¡ì•„/ê°€ì‚¬", color:"#FFD400"},
  {start:"14:00", end:"15:30", label:"ê³µë¶€", color:"#5BC0FF"},
  {start:"15:30", end:"20:30", label:"ìœ¡ì•„/ê°€ì‚¬", color:"#FFD400"},
  {start:"20:30", end:"21:00", label:"ì·¨ì¹¨ì¤€ë¹„", color:"#0B2A6F"},
  {start:"21:00", end:"04:15", label:"ìˆ˜ë©´", color:"#7A3FF2"},
];

const DOW=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "];
const R=40;

const arcsG=document.getElementById("arcs");
const labelsG=document.getElementById("labels");
const hoursG=document.getElementById("hours");
const centerLabel=document.getElementById("centerLabel");
const centerRange=document.getElementById("centerRange");
const centerRemain=document.getElementById("centerRemain");
const hand=document.getElementById("hand");
const arrow=document.getElementById("arrow");
const topDateTime=document.getElementById("topDateTime");

const toMin=t=>{const[a,b]=t.split(":").map(Number);return a*60+b;}
const pad=n=>String(n).padStart(2,"0");
const fracToRad=f=>f*2*Math.PI-Math.PI/2;

function arcPath(s,e){
  let d=e-s; if(d<=0)d+=1;
  const a0=fracToRad(s), a1=fracToRad(e);
  return `M ${50+R*Math.cos(a0)} ${50+R*Math.sin(a0)}
          A ${R} ${R} 0 ${d>0.5?1:0} 1
          ${50+R*Math.cos(a1)} ${50+R*Math.sin(a1)}`;
}

function build(){
  for(let h=1;h<=24;h++){
    const a=fracToRad(h/24);
    hoursG.innerHTML+=`<text x="${50+50*Math.cos(a)}" y="${50+50*Math.sin(a)}"
      text-anchor="middle" dominant-baseline="middle"
      fill="#111" opacity=".7" font-size="3.2">${h}</text>`;
  }

  SEGMENTS.forEach(s=>{
    const a=toMin(s.start)/1440, b=toMin(s.end)/1440;
    arcsG.innerHTML+=`<path d="${arcPath(a,b>a?b:1)}" stroke="${s.color}" stroke-width="14" fill="none"/>`;
    if(b<a) arcsG.innerHTML+=`<path d="${arcPath(0,b)}" stroke="${s.color}" stroke-width="14" fill="none"/>`;

    const mid=((toMin(s.start)+(toMin(s.end)-toMin(s.start)+1440)%1440/2)%1440)/1440;
    const ang=fracToRad(mid);
    labelsG.innerHTML+=`<text x="${50+40*Math.cos(ang)}" y="${50+40*Math.sin(ang)}"
      fill="#fff" stroke="rgba(0,0,0,.35)" stroke-width=".35"
      paint-order="stroke fill" font-size="4" font-weight="800"
      text-anchor="middle" dominant-baseline="middle">${s.label}</text>`;
  });
}

function update(){
  const n=new Date();
  topDateTime.textContent=
    `${n.getFullYear()}-${pad(n.getMonth()+1)}-${pad(n.getDate())} `
  + `${DOW[n.getDay()]} `
  + `${pad(n.getHours())}:${pad(n.getMinutes())}:${pad(n.getSeconds())}`;

  const nowMin=n.getHours()*60+n.getMinutes();
  const idx=SEGMENTS.findIndex(s=>{
    const a=toMin(s.start), b=toMin(s.end);
    return b>a ? nowMin>=a&&nowMin<b : nowMin>=a||nowMin<b;
  });

  if(idx>=0){
    const seg=SEGMENTS[idx];
    centerLabel.textContent=seg.label;
    centerRange.textContent=`${seg.start}~${seg.end}`;

    let remain=toMin(seg.end)-nowMin;
    if(remain<0) remain+=1440;
    const h=Math.floor(remain/60), m=remain%60;
    centerRemain.textContent=
      remain<=0 ? "ê³§ ì¢…ë£Œ" : `ë‚¨ì€ ì‹œê°„ ${h>0?h+"ì‹œê°„ ":""}${m}ë¶„`;
  }

  const frac=(n.getHours()*3600+n.getMinutes()*60+n.getSeconds())/86400;
  const ang=fracToRad(frac);
  hand.setAttribute("x2",50+(R-2)*Math.cos(ang));
  hand.setAttribute("y2",50+(R-2)*Math.sin(ang));
  arrow.setAttribute("transform",`translate(${50+(R-2)*Math.cos(ang)} ${50+(R-2)*Math.sin(ang)}) rotate(${ang*180/Math.PI+90})`);

  requestAnimationFrame(update);
}

/* ===== í•˜ë‹¨ íƒ€ì´ë¨¸ ===== */
let dur=25*60*1000, remain=dur, run=false, last=0;
const tDisp=document.getElementById("timerDisplay");
const tBar=document.getElementById("timerBar");
const hIn=document.getElementById("timerHours");
const mIn=document.getElementById("timerMinutes");

function fmt(ms){
  const s=Math.max(0,Math.floor(ms/1000));
  return `${pad(Math.floor(s/3600))}:${pad(Math.floor(s%3600/60))}:${pad(s%60)}`;
}
function sync(){
  tDisp.textContent=fmt(remain);
  tBar.style.width=`${100*(1-remain/dur)}%`;
}
function apply(){
  dur=(+hIn.value*3600+ +mIn.value*60)*1000 || 1000;
  remain=dur; run=false; last=0; sync();
}
document.getElementById("btnStart").onclick=()=>{run=true; last=performance.now();}
document.getElementById("btnPause").onclick=()=>{run=false;}
document.getElementById("btnReset").onclick=apply;
hIn.oninput=mIn.oninput=apply;

function tick(){
  if(run){
    const now=performance.now();
    if(last){ remain-=now-last; if(remain<=0){remain=0; run=false;} }
    last=now; sync();
  }
  requestAnimationFrame(tick);
}

build(); apply(); tick(); update();
</script>
</body>
</html>
